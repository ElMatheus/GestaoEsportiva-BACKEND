CREATE DATABASE gestaoesportiva;
\c gestaoesportiva;

DROP DATABASE gestaoesportiva;

DROP TABLE jogador;
DROP TABLE times;
DROP TABLE modalidade;
DROP TABLE campeonato;

CREATE TABLE campeonato (
id VARCHAR(100) PRIMARY KEY NOT NULL,
titulo VARCHAR(100) NOT NULL,
data_inicio DATE NOT NULL,
data_final DATE NOT NULL);

CREATE TABLE modalidade ( 
id VARCHAR(100) PRIMARY KEY NOT NULL,
nome_modalidade VARCHAR(100) NOT NULL UNIQUE,
descricao text,
limite_pessoas INT NOT NULL,
campeonato_id VARCHAR(100) NOT NULL,
valor_por_pessoas INT NOT NULL,
type BOOLEAN NOT NULL,
FOREIGN KEY(campeonato_id) REFERENCES campeonato(id) ON UPDATE CASCADE ON DELETE CASCADE);


CREATE TABLE times (
id VARCHAR(100) PRIMARY KEY NOT NULL,
nome VARCHAR(100) NOT NULL,
sala VARCHAR(100),
modalidade_id VARCHAR(100) NOT NULL,
status VARCHAR(100) NOT NULL,
pontos INT DEFAULT(0),
FOREIGN KEY(modalidade_id) REFERENCES modalidade(id) ON UPDATE CASCADE ON DELETE CASCADE);


CREATE TABLE jogador (
id VARCHAR(100) PRIMARY KEY NOT NULL,
nome VARCHAR(100) NOT NULL,
sala VARCHAR(100) NOT NULL,
time_id VARCHAR(100) NOT NULL,
FOREIGN KEY(time_id) REFERENCES times(id) ON UPDATE CASCADE ON DELETE CASCADE);
